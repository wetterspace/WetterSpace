function createTables(){var e=new google.visualization.DataTable;e.addColumn("date","Date"),e.addColumn("number",String(titleName));var t="/json_data/"+fileName+".json";$.getJSON(t,function(t){$.each(t[fileName].data,function(a,o){$("#chartTitle").text(titleName+" ("+t[fileName].unit+")"),$.each(o,function(t,a){console.log("date:",t),a=parseInt(a.replace(",",".")),t.substr(0,4)==requestedDate&&e.addRows([[new Date(t),Number(a)]])})})});var a=document.getElementById("dashboard_div"),o=new google.visualization.Dashboard(a),n="-05-1",i="-07-1",r=new google.visualization.ControlWrapper({controlType:"ChartRangeFilter",containerId:"control_div",options:{ui:{chartOptions:{enableInteractivity:!0,chartArea:{height:"100%"},legend:{position:"none"},colors:["#e7785a","#7eb7c1"],curveType:"function",hAxis:{textPosition:"in",gridlines:{color:"#fff"}},vAxis:{baselineColor:"none",textPosition:"none",gridlines:{color:"#fff"}}}},filterColumnLabel:"Date",backgroundColor:"none"},state:{range:{start:new Date(requestedDate.concat(n)),end:new Date(requestedDate.concat(i))}}}),l=new google.visualization.ChartWrapper({chartType:"Table",containerId:"table_div"});o.bind(r,l);var c=new google.visualization.ChartWrapper({chartType:"LineChart",containerId:"line_div",backgroundColor:"#ffffff",options:{pointSize:4,crosshair:{trigger:"both",orientation:"vertical"},backgroundColor:"none",tooltip:{isHtml:!0},lineWidth:"3",colors:["#e7785a","#7eb7c1"],curveType:"function",legend:{position:"top",alignment:"end"},hAxis:{format:"d MMM",gridlines:{color:"#fff",count:5},textStyle:{color:"#ccc",fontName:"",fontSize:"11",bold:!1,italic:!1}},vAxis:{baselineColor:"#ddd",gridlines:{color:"#ddd",count:5},textStyle:{color:"#ccc",fontName:"",fontSize:"11",bold:!1,italic:!1}},animation:{duration:500,easing:"inAndOut"}}});o.bind(r,c),o.draw(e)}google.load("visualization","1",{packages:["controls","corechart"]}),google.setOnLoadCallback(createTables);var myDashboard,fileName="Lufttemperatur_Tagesmaximum",requestedDate="2014",titleName="Lufttemperatur HÃ¶chstwert";$("button.weatherMetric").click(function(){fileName=$(this).attr("id"),createTables()}),$("button.weatherMetric").click(function(){titleName=$(this).html(),createTables()}),$("button.currentYear").click(function(){requestedDate=$(this).html(),createTables()});